// Generated by CoffeeScript 1.6.3
(function() {
  var app, express, jp2a, moment, renderHtml, request, streamToWeb, _;

  _ = require('underscore');

  jp2a = require('jp2a');

  moment = require('moment');

  express = require('express');

  request = require('request');

  app = express();

  renderHtml = function(url, cb) {
    return jp2a([url, "--width=75", "--color", "--fill", "--html-raw"], function(asciiArt) {
      return cb(asciiArt);
    });
  };

  streamToWeb = function() {
    app.get("/", function(req, res) {
      return request("http://localhost:3131/", function(error, response, body) {
        res.writeHeader(200, {
          "Content-Type": "text/html"
        });
        res.write("<div class='ascii' style='font-size: 8px;'>");
        return _.each(body, function(photo, index) {
          res.write(photo);
          if (index === data.length) {
            res.write("</div>");
            return res.end();
          }
        });
      });
    });
    return app.listen(8888);
  };

  streamToWeb();

}).call(this);
